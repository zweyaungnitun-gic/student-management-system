<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Student Details</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/css/details.css}">
</head>

<body>
    <div class="fixed-header-container">
        <div class="header-bar">
            <div class="header-content">
                <div class="header-left">
                    <a th:href="@{/students}" class="back-button">
                        <i class="bi bi-arrow-left"></i>
                        <span>戻る</span>
                    </a>
                </div>
                <div class="header-center">
                    <h4>生徒管理システム</h4>
                    <p>詳細画面</p>
                </div>
                <div class="header-right">
                    <div class="student-id-badge">
                        <span>ID: </span>
                        <span th:text="${student.id}">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-2">
        <ul class="nav nav-tabs" id="detailTabs">
            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'personal'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='personal')}">
                    個人情報
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'contact'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='contact')}">
                    連絡先情報
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'academic'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='academic')}">
                    Academic情報
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'n5'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='n5')}">
                    N5クラス情報
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'n4'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='n4')}">
                    N4クラス情報
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" th:classappend="${currentTab == 'interview'} ? ' active'"
                    th:href="@{/students/detail/{id}(id=${student.id}, tab='interview')}">
                    面接結果情報
                </a>
            </li>
        </ul>
    </div>

    <div class="container mt-0">
        <div class="card shadow-sm">

            <div th:if="${currentTab == 'personal'}" class="p-4">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="info-group">
                            <div class="info-label">生徒名前(英語)</div>
                            <div class="info-value" th:text="${student.studentName}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">生徒名前(日本語)</div>
                            <div class="info-value" th:text="${student.nameInJapanese}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">生 年 月 日</div>
                            <div class="info-value" th:text="${student.dateOfBirth}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">性 別</div>
                            <div class="info-value" th:text="${student.gender}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">宗 教</div>
                            <div class="info-value" th:text="${student.religion}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">その他宗教</div>
                            <div class="info-value" th:text="${student.otherReligion}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">国民 ID 番号</div>
                            <div class="info-value" th:text="${student.nationalID}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">パスポート番号</div>
                            <div class="info-value" th:text="${student.passportNumber}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">父親名</div>
                            <div class="info-value" th:text="${student.fatherName}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">現在のJLPT合格ラベル</div>
                            <div class="info-value" th:text="${student.currentJapanLevel}"></div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="info-group">
                            <div class="info-label">生徒ID</div>
                            <div class="info-value" th:text="${student.id}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">合格した日本語ラベル</div>
                            <div class="info-value" th:text="${student.passedHighestJLPTLevel}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">希望職種</div>
                            <div class="info-value" th:text="${student.desiredJobType}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">その他希望職種</div>
                            <div class="info-value" th:text="${student.otherDesiredJobType}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">タバコ</div>
                            <div class="info-value"
                                th:text="${student.isSmoking != null && student.isSmoking ? 'Yes' : 'No'}"></div>
                        </div>
                        <div class="info-group">
                            <div class="info-label">お酒</div>
                            <div class="info-value"
                                th:text="${student.isAlcoholDrink != null && student.isAlcoholDrink ? 'Yes' : 'No'}">
                            </div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">入れ墨</div>
                            <div class="info-value" th:text="${student.haveTatto}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">寮があれば入りたい</div>
                            <div class="info-value" th:text="${student.hostelPreference}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">日本渡航経験</div>
                            <div class="info-value" th:text="${student.japanTravelExperience}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">COE申請経験</div>
                            <div class="info-value" th:text="${student.coeApplicationExperience}"></div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-12">
                        <div class="mb-2 fw-bold">その他メモ（自由形式）</div>
                        <textarea class="form-control memo-area" rows="4" th:text="${student.memoNotes}"
                            readonly></textarea>
                    </div>
                </div>
            </div>

            <div th:if="${currentTab == 'contact'}" class="p-4">
                <h4 class="text-primary border-bottom pb-2 mb-4">連絡先情報</h4>
                <div class="info-group">
                    <div class="info-label">電話番号</div>
                    <div class="split-value-container">
                        <div class="info-value w-50" th:text="${student.phoneNumber}"></div>
                        <div class="info-value w-50" th:text="${student.secondaryPhone}"></div>
                    </div>
                </div>

                <div class="info-group">
                    <div class="info-label">Viber連絡先</div>
                    <div class="info-value" th:text="${student.contactViber}"></div>
                </div>

                <div class="info-group tall-row">
                    <div class="info-label">現在場所</div>
                    <div class="info-value" th:text="${student.currentLivingAddress}"></div>
                </div>

                <div class="info-group tall-row">
                    <div class="info-label">出身地住所</div>
                    <div class="info-value" th:text="${student.homeTownAddress}"></div>
                </div>
            </div>

            <div th:if="${currentTab == 'academic'}" class="p-4">
                <h4 class="text-primary border-bottom pb-2 mb-4">Academic情報</h4>
                <div class="row">
                    <div class="col-lg-6">
                        <div class="info-group">
                            <div class="info-label">生徒の授業ステータス</div>
                            <div class="info-value" th:text="${student.status ?: 'N/A'}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">学校登録日</div>
                            <div class="info-value" th:text="${student.enrolledDate ?: 'N/A'}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">授業料支払予定日</div>
                            <div class="info-value" th:text="${student.schedulePaymentTutionDate ?: '未定'}"></div>
                        </div>

                        <div class="info-group">
                            <div class="info-label">授業料支払実績日</div>
                            <div class="info-value" th:text="${student.actualTutionPaymentDate ?: 'N/A'}"></div>
                        </div>

                    </div>
                </div>
            </div>

            <div th:if="${currentTab == 'n5'}">
                <div class="row">
                    <div class="col-md-3 vertical-tab-menu p-4">
                        <div class="nav flex-column nav-pills" role="tablist" aria-orientation="vertical">
                            <a class="nav-link"
                                th:classappend="${currentSubTab == 'general' or currentSubTab == null} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n5', subTab='general')}">N5クラス</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class1'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n5', subTab='class1')}">N5会話クラス①</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class2'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n5', subTab='class2')}">N5会話クラス②</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class3'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n5', subTab='class3')}">N5会話クラス③</a>
                        </div>
                    </div>

                    <div class="col-md-9 ps-md-4 pt-4 pb-4">
                        <h4 class="text-primary border-bottom pb-2 mb-3">
                            <span th:if="${currentSubTab == 'general' or currentSubTab == null}">N5クラス情報</span>
                            <span th:if="${currentSubTab == 'class1'}">N5会話クラス①情報詳細</span>
                            <span th:if="${currentSubTab == 'class2'}">N5会話クラス②情報詳細</span>
                            <span th:if="${currentSubTab == 'class3'}">N5会話クラス③情報詳細</span>
                        </h4>

                        <div th:if="${currentSubTab == 'general' or currentSubTab == null}" class="card p-3 shadow-sm">
                            <h5>N5クラス (General Overview)</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師 (Main)</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassTeacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">総合出席率</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassAttendance}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (1/4)</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassTestResult1}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (2/4)</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassTestResult2}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (3/4)</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassTestResult3}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (4/4)</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassTestResult4}"></div>
                                    </div>
                                    <div class="info-group tall-row">
                                        <div class="info-label">総合フィードバック</div>
                                        <div class="info-value" th:text="${n5Class.n5ClassFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class1'}" class="card p-3 shadow-sm">
                            <h5>N5会話クラス①</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n5Class.n5Class1Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n5Class.n5Class1AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n5Class.n5Class1TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n5Class.n5Class1TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class2'}" class="card p-3 shadow-sm">
                            <h5>N5会話クラス②</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n5Class.n5Class2Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n5Class.n5Class2AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n5Class.n5Class2TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n5Class.n5Class2TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class3'}" class="card p-3 shadow-sm">
                            <h5>N5会話クラス③</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n5Class.n5Class3Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n5Class.n5Class3AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n5Class.n5Class3TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n5Class.n5Class3TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div th:if="${currentTab == 'n4'}">
                <div class="row">
                    <div class="col-md-3 vertical-tab-menu p-4">
                        <div class="nav flex-column nav-pills" role="tablist" aria-orientation="vertical">
                            <a class="nav-link"
                                th:classappend="${currentSubTab == 'general' or currentSubTab == null} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n4', subTab='general')}">N4クラス</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class1'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n4', subTab='class1')}">N4会話クラス①</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class2'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n4', subTab='class2')}">N4会話クラス②</a>
                            <a class="nav-link" th:classappend="${currentSubTab == 'class3'} ? 'active'"
                                th:href="@{/students/detail/{id}(id=${student.id}, tab='n4', subTab='class3')}">N4会話クラス③</a>
                        </div>
                    </div>

                    <div class="col-md-9 ps-md-4 pt-4 pb-4">
                        <h4 class="text-primary border-bottom pb-2 mb-3">
                            <span th:if="${currentSubTab == 'general' or currentSubTab == null}">N4クラス情報</span>
                            <span th:if="${currentSubTab == 'class1'}">N4会話クラス①情報詳細</span>
                            <span th:if="${currentSubTab == 'class2'}">N4会話クラス②情報詳細</span>
                            <span th:if="${currentSubTab == 'class3'}">N4会話クラス③情報詳細</span>
                        </h4>

                        <div th:if="${currentSubTab == 'general' or currentSubTab == null}" class="card p-3 shadow-sm">
                            <h5>N4クラス (General Overview)</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師 (Main)</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassTeacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">総合出席率</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassAttendance}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (1/4)</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassTestResult1}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (2/4)</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassTestResult2}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (3/4)</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassTestResult3}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">JLPTテスト結果 (4/4)</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassTestResult4}"></div>
                                    </div>
                                    <div class="info-group tall-row">
                                        <div class="info-label">総合フィードバック</div>
                                        <div class="info-value" th:text="${n4Class.n4ClassFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class1'}" class="card p-3 shadow-sm">
                            <h5>N4会話クラス①</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n4Class.n4Class1Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n4Class.n4Class1AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n4Class.n4Class1TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n4Class.n4Class1TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class2'}" class="card p-3 shadow-sm">
                            <h5>N4会話クラス②</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n4Class.n4Class2Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n4Class.n4Class2AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n4Class.n4Class2TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n4Class.n4Class2TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${currentSubTab == 'class3'}" class="card p-3 shadow-sm">
                            <h5>N4会話クラス③</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="info-group">
                                        <div class="info-label">担当教師</div>
                                        <div class="info-value" th:text="${n4Class.n4Class3Teacher}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">出席率</div>
                                        <div class="info-value" th:text="${n4Class.n4Class3AttendanceRate}"></div>
                                    </div>
                                    <div class="info-group">
                                        <div class="info-label">最終テストスコア</div>
                                        <div class="info-value" th:text="${n4Class.n4Class3TestResult}"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="info-group tall-row">
                                        <div class="info-label">教師フィードバック</div>
                                        <div class="info-value" th:text="${n4Class.n4Class3TeacherFeedback}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div th:if="${currentTab == 'interview'}" class="p-4">
                <h4 class="text-primary border-bottom pb-2 mb-4">面接結果情報</h4>

                <div th:if="${interviewNotes != null}" th:object="${interviewNotes}" class="card p-3 shadow-sm">

                    <div class="mb-4">
                        <div class="mb-2 fw-bold border-bottom pb-1">一回目面接結果メモ</div>
                        <textarea class="form-control" rows="6" readonly th:text="*{interview1}"
                            style="border-color: #ced4da;"></textarea>
                    </div>

                    <div class="mb-4">
                        <div class="mb-2 fw-bold border-bottom pb-1">二回目面接結果メモ</div>
                        <textarea class="form-control" rows="6" readonly th:text="*{interview2}"
                            style="border-color: #ced4da;"></textarea>
                    </div>

                    <div class="mb-4">
                        <div class="mb-2 fw-bold border-bottom pb-1">三回目面接結果メモ</div>
                        <textarea class="form-control" rows="6" readonly th:text="*{interview3}"
                            style="border-color: #ced4da;"></textarea>
                    </div>

                    <div class="mb-4">
                        <div class="mb-2 fw-bold border-bottom pb-1">その他メモ</div>
                        <textarea class="form-control" rows="6" readonly th:text="*{otherMemo}"
                            style="border-color: #ced4da;"></textarea>
                    </div>

                </div>

                <div th:unless="${interviewNotes != null}" class="alert alert-info mt-3" role="alert">
                    <i class="bi bi-info-circle-fill"></i> 面接結果情報はまだ登録されていません。
                </div>
            </div>
            <div th:unless="${currentTab == 'personal' or currentTab == 'contact' 
                or currentTab == 'academic' or currentTab == 'n5' or currentTab == 'n4' 
                or currentTab == 'interview'}" class="p-4">
                <h4 class="text-muted">Select a tab to view details.</h4>
            </div>

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>